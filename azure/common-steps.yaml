parameters:
  - name: system
    type: string
    
steps:
  - task: NodeTool@0
    inputs:
      versionSource: 'spec' # 'spec' | 'fromFile'. Required. Source of version. Default: spec.
      versionSpec: '14'
 
  - bash: |
     
      #echo -e "\n[+] Installing NPM version $(npmVersion)\n"
      #npm install -g $(npmVersion)

      echo -e "\n[+] Install dependencies\n"
      npm install

      #echo -e "\n[+] Install ionic framework cli\n"
      #npm install -g @ionic/cli

      echo -e "\n[+] Create www folder \n"
      mkdir www
   
    displayName: Install plugin dependencies
  
  - ${{ if eq(parameters.system,'ios') }}:
      
    - bash: |
        echo -e "\n[+] Install ios-deploy package\n"
        npm install ios-deploy

      displayName: Install ios-deploy

  - bash: |

      echo -e "\n[+] Add platform ${{ parameters.system }}\n"
      npx cordova platform add ${{ parameters.system }}

    displayName: Add platforms
